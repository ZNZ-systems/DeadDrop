{{define "message_row"}}
<div class="message-item {{if not .IsRead}}message-unread{{end}}" id="message-{{.ID}}">
    <div class="message-meta">
        {{if .SenderName}}<span class="message-sender">{{.SenderName}}</span>{{end}}
        {{if .SenderEmail}}<span class="message-email">{{.SenderEmail}}</span>{{end}}
        {{if not .IsRead}}<span class="message-unread-dot"></span>{{end}}
    </div>
    <div class="message-body">{{.Body}}</div>
    <span class="message-time">{{.CreatedAt.Format "Jan 2, 2006 3:04 PM"}}</span>
    <div class="message-actions">
        {{if not .IsRead}}
        <button hx-post="/messages/{{.ID}}/read" hx-swap="outerHTML" hx-target="#message-{{.ID}}"
                class="message-action message-action-read">Mark Read</button>
        {{end}}
        <button hx-delete="/messages/{{.ID}}" hx-swap="outerHTML" hx-target="#message-{{.ID}}"
                hx-confirm="Delete this message?"
                class="message-action message-action-delete">Delete</button>
    </div>
</div>
{{end}}
