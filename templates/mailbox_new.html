{{define "title"}}New Mailbox â€” DeadDrop{{end}}
{{define "content"}}
<div class="page-header">
    <h1 class="page-title">New Mailbox</h1>
</div>

<div class="form-card">
    {{if .Error}}
    <div class="flash flash-error">{{.Error}}</div>
    {{end}}

    <form method="POST" action="/mailboxes">
        <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">

        <div class="form-group">
            <label class="form-label">Mailbox Name</label>
            <input type="text" name="name" class="form-input" placeholder="e.g. Support" value="{{.Name}}" required>
        </div>

        <div class="form-group">
            <label class="form-label">Domain</label>
            <select name="domain_id" class="form-input" required>
                <option value="">Select a verified domain</option>
                {{range .Domains}}
                {{if .Verified}}
                <option value="{{.ID}}" {{if eq (printf "%d" .ID) $.SelectedDomainID}}selected{{end}}>{{.Name}}</option>
                {{end}}
                {{end}}
            </select>
            <p class="form-hint">Only verified domains can be used for mailboxes.</p>
        </div>

        <div class="form-group">
            <label class="form-label">From Address</label>
            <input type="email" name="from_address" class="form-input" placeholder="e.g. support@yourdomain.com" value="{{.FromAddress}}" required>
            <p class="form-hint">Must match the selected domain.</p>
        </div>

        <p class="form-hint" style="margin-top: 1rem;">
            DeadDrop will auto-create one Form stream (for the widget) and one Email stream (for inbound email) for this mailbox.
        </p>

        <button type="submit" class="btn-primary" style="width: 100%;">Create Mailbox</button>
    </form>

    <a href="/mailboxes" class="back-link">Back to mailboxes</a>
</div>
{{end}}
