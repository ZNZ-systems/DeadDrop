{{define "title"}}{{.Domain.Name}} â€” DeadDrop{{end}}
{{define "content"}}
<div class="mb-6">
    <div class="flex items-center justify-between">
        <h1 class="text-2xl font-bold">{{.Domain.Name}}</h1>
        <form method="POST" action="/domains/{{.Domain.PublicID}}/delete"
              onsubmit="return confirm('Delete this domain and all its messages?')">
            <button type="submit" class="text-sm text-red-600 hover:text-red-800">Delete Domain</button>
        </form>
    </div>

    {{if not .Domain.Verified}}
    <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
        <h2 class="font-medium text-yellow-800 mb-2">DNS Verification Required</h2>
        <p class="text-sm text-yellow-700 mb-2">Add this TXT record to your domain's DNS:</p>
        <code class="block bg-white px-3 py-2 rounded border text-sm font-mono break-all">
            deaddrop-verify={{.Domain.VerificationToken}}
        </code>
        <form method="POST" action="/domains/{{.Domain.PublicID}}/verify" class="mt-3">
            <button type="submit" class="bg-yellow-600 text-white px-4 py-1.5 rounded text-sm hover:bg-yellow-700">
                Check Verification
            </button>
        </form>
    </div>
    {{else}}
    <div class="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
        <h2 class="font-medium text-green-800 mb-2">Widget Embed Code</h2>
        <p class="text-sm text-green-700 mb-2">Add this to any page on {{.Domain.Name}}:</p>
        <code class="block bg-white px-3 py-2 rounded border text-sm font-mono break-all">
            &lt;script src="{{$.BaseURL}}/static/widget.js" data-deaddrop-id="{{.Domain.PublicID}}"&gt;&lt;/script&gt;
        </code>
    </div>
    {{end}}
</div>

<h2 class="text-lg font-semibold mb-4">Messages</h2>

{{if .Messages}}
<div class="bg-white shadow rounded-lg divide-y" id="messages">
    {{range .Messages}}
    {{template "message_row" .}}
    {{end}}
</div>
{{else}}
<div class="text-center py-8 bg-white shadow rounded-lg">
    <p class="text-gray-500">No messages yet.</p>
</div>
{{end}}

<a href="/" class="block mt-6 text-sm text-gray-600 hover:underline">Back to dashboard</a>
{{end}}
